{% extends "layout.html" %}
{% block content %}
    <form id="filtersForm" class="form-inline" method="GET">
    Choose the x-coordinate grouping:
    {% with pickerName = xGroupingPickerName, pickerElements = pickerElements, selectedName = xName, onChangeFunc='highlight(this)' %}
        {% include 'pickerGen.html' %}
    {% endwith %}
    Choose the x-coordinate grouping:
    {% with pickerName = yGroupingPickerName, pickerElements = pickerElements, selectedName = yName, onChangeFunc='highlight(this)' %}
        {% include 'pickerGen.html' %}
    {% endwith %}
    <button type="submit" class="btn btn-default">{{ formButtonText }}</button>
    </form>

    <table class="table table-bordered">
        <tr>
            <th>{{ xName }}<br>-----<br>{{ yName }}</th>
            {% set iterated = [0] %}
            {% for key, value in tableData.items() if iterated[0] < 1 %}
                {% if iterated.append(iterated.pop() + 1) %}{% endif %}
                {% for key1, value1 in value.items() %}
                    <th>{{ key1 }}</th>
                {% endfor %}
            {% endfor %}
        </tr>
        {% for key, value in tableData.items() %}
            <tr>
                <td>{{ key }}</td>
                {% for key1, value1 in value.items() %}
                    <td>
                        <table id="dataView" class="table table-bordered">
                            <thead>
                            <tr>
                                {% for i in columnNames %}
                                    <th>{{ meta[i].name }}</th>
                                {% endfor %}
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                {% if value1 is not none %}
                                    {% for i in value1%}
                                        <tr>
                                            {% for j in i %}
                                                <td>{{ j }}</td>
                                            {% endfor %}
                                        </tr>
                                    {% endfor %}
                                {% endif %}
                            </tr>
                            </tbody>
                        </table>
                    </td>
                {% endfor %}
            </tr>
        {% endfor %}

    </table>
{% endblock %}